<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>

const supabaseUrl = "TUA_SUPABASE_URL";
const supabaseKey = "TUA_SUPABASE_ANON_KEY";
const supabase = supabase.createClient(supabaseUrl, supabaseKey);

async function addItem() {
    const name = document.getElementById("name").value;
    const description = document.getElementById("description").value;
    const quantity = document.getElementById("quantity").value;
    const number = document.getElementById("number").value;
    const image = document.getElementById("image").value;

    if (name && quantity && number) {
        const { data, error } = await supabase
            .from("dispensa")
            .insert([{ name, description, quantity, number, image }]);

        if (error) {
            console.error("Errore nell'inserimento:", error);
        } else {
            console.log("Dati salvati:", data);
            loadItems();
        }
    }
}

async function loadItems() {
    const { data, error } = await supabase.from("dispensa").select("*");

    if (error) {
        console.error("Errore nel caricamento dei dati:", error);
        return;
    }

    const table = document.getElementById("itemsTable");
    table.innerHTML = "";

    data.forEach(item => {
        const row = `<tr>
            <td>${item.name}</td>
            <td>${item.description}</td>
            <td>${item.quantity}</td>
            <td>${item.number}</td>
            <td><img src="${item.image}" alt="${item.name}"></td>
        </tr>`;
        table.innerHTML += row;
    });
}

loadItems();
